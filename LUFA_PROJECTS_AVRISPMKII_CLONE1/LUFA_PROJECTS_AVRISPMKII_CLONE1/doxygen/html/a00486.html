<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LUFA_PROJECTS_AVRISPMKII_CLONE1: MIDI Class Device Mode Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LUFA_PROJECTS_AVRISPMKII_CLONE1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00486.html','');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MIDI Class Device Mode Driver<div class="ingroups"><a class="el" href="a00543.html">USB Class Drivers</a> &raquo; <a class="el" href="a00503.html">MIDI Class Driver</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">MIDI Class Device Mode Configuration and State Structure.  <a href="a00640.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga534c230f80cf4edba4558d947727f36e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#ga534c230f80cf4edba4558d947727f36e">MIDI_Device_ConfigureEndpoints</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1)</td></tr>
<tr class="separator:ga534c230f80cf4edba4558d947727f36e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa50d71ec298f9945e95bcd7c1363aee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#gaa50d71ec298f9945e95bcd7c1363aee9">MIDI_Device_USBTask</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1)</td></tr>
<tr class="separator:gaa50d71ec298f9945e95bcd7c1363aee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad55056397b71abf267e7ec24352be6cb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#gad55056397b71abf267e7ec24352be6cb">MIDI_Device_SendEventPacket</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo, const MIDI_EventPacket_t *const Event) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(2)</td></tr>
<tr class="separator:gad55056397b71abf267e7ec24352be6cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb0a51c4524af9a331599a2a520326db"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#gaeb0a51c4524af9a331599a2a520326db">MIDI_Device_Flush</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1)</td></tr>
<tr class="separator:gaeb0a51c4524af9a331599a2a520326db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c54d9468d32f75d7110badb5d7324a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#ga5c54d9468d32f75d7110badb5d7324a6">MIDI_Device_ReceiveEventPacket</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo, MIDI_EventPacket_t *const Event) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(2)</td></tr>
<tr class="separator:ga5c54d9468d32f75d7110badb5d7324a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dfaa44a4e5c7ee44c54c32d550b5e24"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00486.html#ga7dfaa44a4e5c7ee44c54c32d550b5e24">MIDI_Device_ProcessControlRequest</a> (<a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const MIDIInterfaceInfo) <a class="el" href="a00448.html#ga6cab2758ec5d666d8b4542b09102f106">ATTR_NON_NULL_PTR_ARG</a>(1)</td></tr>
<tr class="separator:ga7dfaa44a4e5c7ee44c54c32d550b5e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="Sec_USBClassMIDIDevice_Dependencies"></a>
Module Source Dependencies</h1>
<p>The following files must be built with any user project that uses this module:</p><ul>
<li><a class="el" href="a00170.html">LUFA/Drivers/USB/Class/Device/MIDIClassDevice.c</a> <em>(Makefile source module name: LUFA_SRC_USBCLASS)</em></li>
</ul>
<h1><a class="anchor" id="Sec_USBClassMIDIDevice_ModDescription"></a>
Module Description</h1>
<p>Device Mode USB Class driver framework interface, for the MIDI USB Class driver. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga534c230f80cf4edba4558d947727f36e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga534c230f80cf4edba4558d947727f36e">&#9670;&nbsp;</a></span>MIDI_Device_ConfigureEndpoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MIDI_Device_ConfigureEndpoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the endpoints of a given MIDI interface, ready for use. This should be linked to the library <a class="el" href="a00529.html#ga953a275884b9e33629ff6323fca05252">EVENT_USB_Device_ConfigurationChanged()</a> event so that the endpoints are configured when the configuration containing the given MIDI interface is selected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean <code>true</code> if the endpoints were successfully configured, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a id="gaeb0a51c4524af9a331599a2a520326db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb0a51c4524af9a331599a2a520326db">&#9670;&nbsp;</a></span>MIDI_Device_Flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MIDI_Device_Flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flushes the MIDI send buffer, sending any queued MIDI events to the host. This should be called to override the <a class="el" href="a00486.html#gad55056397b71abf267e7ec24352be6cb">MIDI_Device_SendEventPacket()</a> function's packing behavior, to flush queued events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the <a class="el" href="a00508.html#gaa42b7eb8d1be3afadb97097bf2605740">Endpoint_WaitUntilReady_ErrorCodes_t</a> enum. </dd></dl>

</div>
</div>
<a id="ga7dfaa44a4e5c7ee44c54c32d550b5e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7dfaa44a4e5c7ee44c54c32d550b5e24">&#9670;&nbsp;</a></span>MIDI_Device_ProcessControlRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MIDI_Device_ProcessControlRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Processes incoming control requests from the host, that are directed to the given MIDI class interface. This should be linked to the library <a class="el" href="a00529.html#ga3f4ce439a74a152e3c8ffda5c7dd201a">EVENT_USB_Device_ControlRequest()</a> event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5c54d9468d32f75d7110badb5d7324a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c54d9468d32f75d7110badb5d7324a6">&#9670;&nbsp;</a></span>MIDI_Device_ReceiveEventPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MIDI_Device_ReceiveEventPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MIDI_EventPacket_t *const&#160;</td>
          <td class="paramname"><em>Event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receives a MIDI event packet from the host. Events are unpacked from the endpoint, thus if the endpoint bank contains multiple MIDI events from the host in the one packet, multiple calls to this function will return each individual event.</p>
<dl class="section pre"><dt>Precondition</dt><dd>This function must only be called when the Host state machine is in the <a class="el" href="a00530.html#ggaa30175c751f951c44bf24fc901480652a7324691118a474c8f197405ba3f57d8b">HOST_STATE_Configured</a> state or the call will fail.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Event</td><td>Pointer to a USB_MIDI_EventPacket_t structure where the received MIDI event is to be placed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean <code>true</code> if a MIDI event packet was received, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a id="gad55056397b71abf267e7ec24352be6cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad55056397b71abf267e7ec24352be6cb">&#9670;&nbsp;</a></span>MIDI_Device_SendEventPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MIDI_Device_SendEventPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MIDI_EventPacket_t *const&#160;</td>
          <td class="paramname"><em>Event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a MIDI event packet to the host. If no host is connected, the event packet is discarded. Events are queued into the endpoint bank until either the endpoint bank is full, or <a class="el" href="a00486.html#gaeb0a51c4524af9a331599a2a520326db">MIDI_Device_Flush()</a> is called. This allows for multiple MIDI events to be packed into a single endpoint packet, increasing data throughput.</p>
<dl class="section pre"><dt>Precondition</dt><dd>This function must only be called when the Host state machine is in the <a class="el" href="a00530.html#ggaa30175c751f951c44bf24fc901480652a7324691118a474c8f197405ba3f57d8b">HOST_STATE_Configured</a> state or the call will fail.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Event</td><td>Pointer to a populated MIDI_EventPacket_t structure containing the MIDI event to send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the <a class="el" href="a00528.html#ga7f0d584afdd478f8fdf20b9daf58394b">Endpoint_Stream_RW_ErrorCodes_t</a> enum. </dd></dl>

</div>
</div>
<a id="gaa50d71ec298f9945e95bcd7c1363aee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa50d71ec298f9945e95bcd7c1363aee9">&#9670;&nbsp;</a></span>MIDI_Device_USBTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MIDI_Device_USBTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00640.html">USB_ClassInfo_MIDI_Device_t</a> *const&#160;</td>
          <td class="paramname"><em>MIDIInterfaceInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>General management task for a given MIDI class interface, required for the correct operation of the interface. This should be called frequently in the main program loop, before the master USB management task <a class="el" href="a00540.html#gac4059f84a2fc0b926c31868c744f5853">USB_USBTask()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">MIDIInterfaceInfo</td><td>Pointer to a structure containing a MIDI Class configuration and state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
